@page "/MyMachines"
@using MagazynierApp.Shared
@using System.Globalization
@inject HttpClient HttpClient

<h3>Moje maszyny</h3>

<div class="main">
    @if (_machinesList != null)
    {
        @foreach (var machine in _machinesList)
        {
            <MachineCard Machine="machine"/>
        }
    }
    else
    {
        <p><em>Loading...</em></p>
    }
</div>

@code {
    Machine[] _machinesList;
    DateTime _lastUpdated;
    
    protected override async Task OnInitializedAsync()
    {
        _machinesList = await HttpClient.GetFromJsonAsync<Machine[]>("machines");
        _lastUpdated = DateTime.Now;
    }
    
    
}